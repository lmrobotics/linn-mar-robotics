#include "WPILib.h"
#include "NetworkTables/NetworkTable.h"
#include <pthread.h>
#include "drive.h"
#include <unistd.h>

class IronLions : public IterativeRobot
{
private:
	 drive drive;
	 Solenoid shifter;
	 pthread_t* mainThread;
	 Joystick xbox1,xbox2;
	 Encoder driveEncoder;
	 Compressor compressor;
public:
	IronLions(void):
		drive(1,1,1,2,1,3,1,4),
		shifter(3),
		driveEncoder(2,3),
		xbox1(2),
		xbox2(1),
		compressor(1,1)
	{
		driveEncoder.SetMaxPeriod(.1);
		driveEncoder.SetDistancePerPulse(.0222);
		driveEncoder.Start();
	}

	/**
	 * Robot-wide initialization code should go here.
	 *
	 * Use this method for default Robot-wide initialization which will
	 * be called when the robot is first powered on.  It will be called exactly 1 time.
	 */
	void IronLions::RobotInit() {
		printf("Entering RobotInit");
	}

	// Suspend the autonomous thread and delete it
	void IronLions::TeleopPeriodic() {

		bool r1_button = xbox1.GetRawButton(6);
		bool A_button = xbox1.GetRawButton(1);

		if(r1_button==true){
			shifter.Set(false);
		}
		else {
			shifter.Set(true);
		}
		drive.TeleDrive(xbox1.GetRawAxis(4),xbox1.GetY(GenericHID::kLeftHand));
	}
	void IronLions::StopAutoThread()
	{

	}

	/**
	 * Initialization code for disabled mode should go here.
	 *
	 * Use this method for initialization code which will be called each time'
	 * the robot enters disabled mode.
	 */
	void IronLions::DisabledInit() {

	}

	/**
	 * Periodic code for disabled mode should go here.
	 *
	 * Use this method for code which will be called periodically at a regular
	 * rate while the robot is in disabled mode.
	 */
	void IronLions::DisabledPeriodic() {

	}

	/**
	 * Initialization code for autonomous mode should go here.
	 *
	 * Use this method for initialization code which will be called each time
	 * the robot enters autonomous mode.
	 */
	void IronLions::AutonomousInit() {

	}

	/**
	 * Periodic code for autonomous mode should go here.
	 *
	 * Use this method for code which will be called periodically at a regular
	 * rate while the robot is in autonomous mode.
	 */
	void IronLions::AutonomousPeriodic() {

	}

	/**
	 * Initialization code for teleop mode should go here.
	 *
	 * Use this method for initialization code which will be called each time
	 * the robot enters teleop mode.
	 */
	void IronLions::TeleopInit()
	{

	}

	/**
	 * Periodic code for teleop mode should go here.
	 *
	 * Use this method for code which will be called periodically at a regular
	 * rate while the robot is in teleop mode.
	 */

	void IronLions::TestInit()
	{

	}
};

START_ROBOT_CLASS(IronLions);
